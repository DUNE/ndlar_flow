# Generates hough lines from the charge_event_reconstruction workflow output
# h5flow --nompi -c yamls/proto_nd_flow/workflows/charge/hough.yaml -i input.h5 -o output.h5
# three stages; z_convert, line_finder & eff_map

flow:
  source: events
#  stages: [line_finder]
  stages: [eff_map]
  drop: []

resources:
  - !include yamls/proto_nd_flow/resources/RunData.yaml
  - !include yamls/proto_nd_flow/resources/Geometry.yaml

hits:
  classname: H5FlowDatasetLoopGenerator
  path: h5flow.modules
  dset_name: 'charge/calib_final_hits'
  params:
    chunk_size: 1500

rock_hits:
  classname: H5FlowDatasetLoopGenerator
  path: h5flow.modules
  dset_name: 'rock_muon_hits'

events:
  classname: H5FlowDatasetLoopGenerator
  path: h5flow.modules
  dset_name: 'charge/events'
  params:
    chunk_size: 1

hough_o:
  classname: H5FlowDatasetLoopGenerator
  path: h5flow.modules
  dset_name: 'charge/hough_o'

hough_hits_o:
  classname: H5FlowDatasetLoopGenerator
  path: h5flow.modules
  dset_name: 'charge/hough_hits_o'

# Line finding yaml file
line_finder:
  !include yamls/proto_nd_flow/reco/charge/LineFinder.yaml

# Efficiency map yaml file
eff_map:
  !include yamls/proto_nd_flow/reco/charge/EffMap.yaml

