classname: WaveformSum # light/wvfm_sum.py
requires:
  - 'light/events'
  - 'light/deconv'
  - 'light/deconv/alignment'
params:
  # input
  wvfm_dset_name: 'light/deconv'

  # output
  swvfm_dset_name: 'light/swvfm'

  # configuration parameters
  gain:
    # by default, don't include channel in waveform sum
    default: 0.0000e+00
    # each gain value provided here is based on a calibration to the observed
    # signal on the charge readout, using cosmic events with no activity within
    # 2cm of any light detector. Units are keV/ADC
    #0: {
    #  2: 1.1951e-01, 3: 1.1871e-01, 4: 1.1126e-01, 5: 1.0318e-01, 6: 1.0861e-01, 7: 2.5273e-01,
    #  9: 9.8463e-02, 10: 1.0674e-01, 11: 1.2248e-01, 12: 1.2631e-01, 13: 0.0000e+00, 14: 2.0166e-01,
    #  18: 1.2706e-01, 19: 1.4123e-01, 20: 1.5424e-01, 21: 1.3427e-01, 22: 1.3993e-01, 23: 1.3436e-01,
    #  25: 8.9361e-02, 26: 9.4880e-02, 27: 1.2265e-01, 28: 1.2665e-01, 29: 1.3140e-01, 30: 1.4925e-01,
    #  34: 0.0000e+00, 35: 0.0000e+00, 36: 0.0000e+00, 37: 0.0000e+00, 38: 0.0000e+00, 39: 0.0000e+00,
    #  41: 8.6228e-02, 42: 8.6169e-02, 43: 1.1319e-01, 44: 1.2783e-01, 45: 1.0314e-01, 46: 1.0681e-01,
    #  50: 1.1028e-01, 51: 1.0620e-01, 52: 1.0337e-01, 53: 1.1395e-01, 54: 1.0113e-01, 55: 9.2771e-02,
    #  57: 1.4562e-01, 58: 1.3886e-01, 59: 1.6671e-01, 60: 1.9253e-01, 61: 1.1782e-01, 62: 1.2154e-01,
    #}

    #1: {
    #  2: 1.2767e-01, 3: 1.2929e-01, 4: 1.1948e-01, 5: 1.1348e-01, 6: 1.0004e-01, 7: 1.0064e-01,
    #  9: 1.1150e-01, 10: 1.1836e-01, 11: 1.3098e-01, 12: 1.3031e-01, 13: 1.1647e-01, 14: 1.0656e-01,
    #  18: 9.3792e-02, 19: 9.2963e-02, 20: 9.8565e-02, 21: 9.4803e-02, 22: 9.3667e-02, 23: 9.5866e-02,
    #  25: 1.0371e-01, 26: 1.0743e-01, 27: 1.4446e-01, 28: 1.4653e-01, 29: 1.3132e-01, 30: 1.3607e-01,
    #  34: 0.0000e+00, 35: 1.1955e-01, 36: 1.3513e-01, 37: 1.1206e-01, 38: 1.1787e-01, 39: 1.1129e-01,
    #  41: 9.8484e-02, 42: 9.6465e-02, 43: 1.4974e-01, 44: 1.4404e-01, 45: 1.0300e-01, 46: 1.1133e-01,
    #  50: 1.0698e-01, 51: 9.6853e-02, 52: 1.0770e-01, 53: 1.0303e-01, 54: 1.0507e-01, 55: 1.1152e-01,
    #  57: 9.6220e-02, 58: 1.0405e-01, 59: 1.3277e-01, 60: 1.3809e-01, 61: 1.0730e-01, 62: 1.1257e-01,
    #}
    0: { 2: 1.4525e-02, 3: 1.3895e-02, 4: 1.4376e-02, 5: 1.2182e-02, 6: 1.3779e-02, 7: 5.0751e-03, 9: 1.3345e-02, 10: 1.4942e-02, 11: 1.7046e-02, 12: 1.7402e-02, 14: 2.7270e-02, 18: 1.9810e-02, 19: 2.0980e-02, 20: 1.9596e-02, 21: 1.8332e-02, 22: 2.1615e-02, 23: 2.0927e-02, 25: 1.2823e-02, 26: 1.4079e-02, 27: 1.6632e-02, 28: 1.7882e-02, 29: 1.7390e-02, 30: 1.9697e-02, 35: 0.0000e+00, 36: 0.0000e+00, 39: 0.0000e+00, 41: 1.2692e-02, 42: 1.2613e-02, 43: 1.7041e-02, 44: 1.7847e-02, 45: 1.4114e-02, 46: 1.5241e-02, 50: 1.4195e-02, 51: 1.3905e-02, 52: 1.3748e-02, 53: 1.5610e-02, 54: 1.3821e-02, 55: 1.3739e-02, 57: 2.3834e-02, 58: 2.4991e-02, 59: 2.2988e-02, 60: 2.6654e-02, 61: 1.5890e-02, 62: 1.9259e-02, }
    1: { 2: 1.8860e-02, 3: 1.9424e-02, 4: 1.8047e-02, 5: 1.7522e-02, 6: 1.5116e-02, 7: 1.4150e-02, 9: 1.6605e-02, 10: 1.7856e-02, 11: 1.9807e-02, 12: 1.9066e-02, 13: 1.7053e-02, 14: 1.5104e-02, 18: 1.3558e-02, 19: 1.3792e-02, 20: 1.4216e-02, 21: 1.3315e-02, 22: 1.3428e-02, 23: 1.3759e-02, 25: 1.5107e-02, 26: 1.5866e-02, 27: 2.0814e-02, 28: 2.1102e-02, 29: 1.8527e-02, 30: 1.8993e-02, 35: 1.7351e-02, 36: 1.8616e-02, 37: 1.4856e-02, 38: 1.5792e-02, 39: 1.4641e-02, 41: 1.2887e-02, 42: 1.2124e-02, 43: 1.7385e-02, 44: 1.6613e-02, 45: 1.2566e-02, 46: 1.2990e-02, 50: 1.5488e-02, 51: 1.3824e-02, 52: 1.3927e-02, 53: 1.5037e-02, 54: 1.4777e-02, 55: 1.6400e-02, 57: 1.3862e-02, 58: 1.4645e-02, 59: 1.8616e-02, 60: 1.9612e-02, 61: 1.5219e-02, 62: 1.7967e-02, }

  gain_mc:
    default: 0.0
    0: { 2: 1.5950e-02, 3: 1.5071e-02, 4: 1.4178e-02, 5: 1.2917e-02, 6: 1.2806e-02, 7: 1.2362e-02, 9: 1.4313e-02, 10: 1.4595e-02, 11: 1.4937e-02, 12: 1.4845e-02, 14: 3.0669e-02, 18: 1.5330e-02, 19: 1.5922e-02, 20: 1.6061e-02, 21: 1.5734e-02, 22: 1.5345e-02, 23: 1.5360e-02, 25: 1.5116e-02, 26: 1.5165e-02, 27: 1.5746e-02, 28: 1.5852e-02, 29: 1.5956e-02, 30: 1.6050e-02, 41: 1.4144e-02, 42: 1.3850e-02, 43: 1.4863e-02, 44: 1.4889e-02, 45: 1.5238e-02, 46: 1.5181e-02, 50: 1.5652e-02, 51: 1.4882e-02, 52: 1.5295e-02, 53: 1.5260e-02, 54: 1.4681e-02, 55: 1.4843e-02, 57: 1.5433e-02, 58: 1.5554e-02, 59: 1.6498e-02, 60: 1.6721e-02, 61: 1.5918e-02, 62: 1.6018e-02 }
    1: { 2: 1.5608e-02, 3: 1.5785e-02, 4: 1.4301e-02, 5: 1.4023e-02, 6: 1.2798e-02, 7: 1.2584e-02, 9: 1.3987e-02, 10: 1.3849e-02, 11: 1.4803e-02, 12: 1.5067e-02, 13: 1.4566e-02, 14: 1.4596e-02, 18: 1.4644e-02, 19: 1.4457e-02, 20: 1.5095e-02, 21: 1.4984e-02, 22: 1.5318e-02, 23: 1.5154e-02, 25: 1.4624e-02, 26: 1.4674e-02, 27: 1.5968e-02, 28: 1.5750e-02, 29: 1.6515e-02, 30: 1.6598e-02, 35: 1.9537e-02, 36: 1.8261e-02, 37: 1.7565e-02, 38: 1.7053e-02, 39: 1.6861e-02, 41: 1.4535e-02, 42: 1.4877e-02, 43: 1.4843e-02, 44: 1.4934e-02, 45: 1.5216e-02, 46: 1.5194e-02, 50: 1.5199e-02, 51: 1.4201e-02, 52: 1.3649e-02, 53: 1.3716e-02, 54: 1.4290e-02, 55: 1.4657e-02, 57: 1.5819e-02, 58: 1.5742e-02, 59: 1.5659e-02, 60: 1.5548e-02, 61: 1.5070e-02, 62: 1.5153e-02 }