# Deconvolves light waveform electronics response

flow:
  source: 'light/events'
  stages: [wvfm_deconv, wvfm_deconv_summ]

wvfm_deconv:
  classname: WaveformDeconvolution
  requires:
    - 'light/fwvfm'
  params:
    wvfm_dset_name: 'light/fwvfm' # use pedestal+noise subtracted waveforms
    deconv_dset_name: 'light/deconv'
    do_filtering: True
    filter_type: Wiener
    noise_spectrum_filename: 'wvfm_deconv_noise_power.npz'
    signal_spectrum_filename: 'wvfm_deconv_signal_power.npz'
    signal_impulse_filename: 'wvfm_deconv_signal_impulse.fit.npz'

wvfm_deconv_summ:
  classname: WaveformSummary
  requires:
    - 'light/events'
    - 'light/deconv'
  params:
    wvfm_dset_name: 'light/deconv'
